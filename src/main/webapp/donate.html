<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food for Need - Donate</title>
    <!-- Core CSS - Include with every page -->
    <link href="assets/plugins/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="assets/plugins/pace/pace-theme-big-counter.css" rel="stylesheet" />
    <link href="assets/css/style.css" rel="stylesheet" />
    <link href="assets/css/main-style.css" rel="stylesheet" />

    <!-- Page-Level CSS -->
    <link href="assets/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
    <link href="assets/plugins/dataTables/select.dataTables.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/plugins/timedropper.css">
    

</head>

<body>
    <!--  wrapper -->
    <div id="wrapper">
        <!-- navbar top -->
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation" id="navbar">
            <!-- navbar-header -->
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">
                    <img src="assets/img/logo.png" alt="" />
                </a>
            </div>
            <!-- end navbar-header -->
        
        </nav>
        <!-- end navbar top -->

        <!-- navbar side -->
        <nav class="navbar-default navbar-static-side" role="navigation">
            <!-- sidebar-collapse -->
            <div class="sidebar-collapse">
                <!-- side-menu -->
                <ul class="nav" id="side-menu">
                    <li class="">
                        <a href="index.html"><i class="fa fa-bullhorn"></i>Bulletin</a>
                    </li>
                    
                    <li>
                        <a href="donate.html"><i class="fa fa-shopping-cart"></i> Giveaway</a>
                    </li>
                    <li>
                        <a href="request.html"><i class="fa fa-truck"></i> Request</a>
                    </li>

                </ul>
                <!-- end side-menu -->
            </div>
            <!-- end sidebar-collapse -->
        </nav>
        <!-- end navbar side -->
        <!--  page-wrapper -->
        <div id="page-wrapper">

            
            <div class="row">
                 <!--  page header -->
                <div class="col-lg-12">
                    <h1 class="page-header">Start giving away today! Anything Counts!</h1>
                </div>
                 <!-- end  page header -->
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <!-- Advanced Tables -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                             Market List
                        </div>
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table" id="marketList">
                                    <thead>
                                        <tr>
                                          <th></th>
                                          <th>ID</th>
									      <th>Market Name</th>
									      <th>Phone</th>
									      <th>Location</th>
                                        </tr>
                                    </thead>
                                    <tbody>  
                                    </tbody>
                                </table>
                            </div>
                            
                        </div>
                    </div>
                    <!--End Market List Tables -->
                </div>
            </div>
            
            <div class="row" id="donateList" style="display:none;">
                <div class="col-lg-12">
                    <!-- Advanced Tables -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                             Donation Info
                        </div>
                        <div class="panel-body">
                        	<div class="row">
                        	    <div class="col-lg-4">
	                        		<form role="form">
	                        			<div class="form-group">
	                                            <label>Seafood Quantity</label>
	                                            <input id="seafood" class="form-control" placeholder="? Ibs">
	                                    </div>
	                                    <div class="form-group">
	                                            <label>Meat Quantity</label>
	                                            <input id="meat" class="form-control" placeholder="? Ibs">
	                                    </div>
	                                    <div class="form-group">
	                                            <label>Vegetable Quantity</label>
	                                            <input id="vegetable" class="form-control" placeholder="? Ibs">
	                                    </div>
	                                    <div class="form-group">
	                                            <label>Fruit Quantity</label>
	                                            <input id="fruit" class="form-control" placeholder="? Ibs">
	                                    </div>
	                                    <div class="form-group">
	                                            <label>Others</label>
	                                            <input id="others" class="form-control" placeholder="? Ibs">
	                                    </div>
	                                </form>
                                </div>
                                <div class="col-lg-4">                                                             
                                	<form role="form">
                                		<div class="form-group">
                                	        <label>Available date</label>
        									<input class="form-control" type="date" name="orderDate" id="orderDate">
        								</div>
        								<div class="form-group">
                                	        <label>Pickup Time</label>
        									<input class="form-control" type="text" name="orderTime" id="orderTime">
        								</div>
        								<!-- submitProduct() locate at donate.js -->
         								<button type="button" class="btn btn-primary" onclick="submitProduct();">Submit</button>
 	                                    <button type="reset" class="btn btn-success">Reset</button>
                                	</form>
                             		
                               	</div>
                        	</div>
                            
                            
                        </div>
                    </div>
                    <!--End Product List Tables -->
                </div>
            </div>
            
        </div>
        <!-- end page-wrapper -->

    </div>
    <!-- end wrapper -->
    <script type="text/javascript" src="util.js"></script> 
    <script type="text/javascript" src="donate.js"></script>
    
    <!-- Core Scripts - Include with every page -->
    <script src="assets/plugins/jquery-1.10.2.js"></script>
    <script src="assets/plugins/bootstrap/bootstrap.min.js"></script>
    <script src="assets/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="assets/plugins/pace/pace.js"></script>
    <script src="assets/scripts/siminta.js"></script>
    <!-- Page-Level Plugin Scripts-->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAJPap5AruRVqZwxDQBZ8cZoaIv-Nu-srY"></script>
    <script src="assets/plugins/dataTables/jquery.dataTables.js"></script>
    <script src="assets/plugins/dataTables/dataTables.select.min.js"></script> 
	<script src="assets/plugins/dataTables/dataTables.bootstrap.js"></script>
	<script src="assets/plugins/timedropper.js"></script>
    <script>
    	var PRODUCT_DATA = 'api//productsDao';
    	var MARKET_DATA = 'api//marketDao';
		/*
		function submitProduct(){
       		var marketTemp = localStorage.getItem("marketInfo");
       		var marketInfo = marketTemp.split(",");
			var seafoodValue = (document.getElementById('seafood').value == "") ? 0 : document.getElementById('seafood').value;
			var meatValue = (document.getElementById('meat').value == "") ? 0 : document.getElementById('meat').value;
			var vegetableValue = (document.getElementById('vegetable').value == "") ? 0 : document.getElementById('vegetable').value;
			var fruitValue = (document.getElementById('fruit').value == "") ? 0 : document.getElementById('fruit').value;
			var othersValue = (document.getElementById('others').value == "") ? 0 : document.getElementById('others').value;
			var orderDateValue = document.getElementById('orderDate').value;
			var orderTime = document.getElementById('orderTime').value;
			var id = marketInfo[1];
			var marketData;
			xhrGet(MARKET_DATA +'?id=' +id, function(data){
				console.log("data");
				console.log(data);
				if(data != null){
					marketData = data;
					console.log("marketData");
					console.log(marketData);
					
					if(seafoodValue == 0 && meatValue == 0 && vegetableValue == 0 && fruitValue == 0 && othersValue == 0){
						alert("You need to input at least one item!");
						return;
					}
					
					if(orderDateValue == "" || orderTime == ""){
						alert("Please choose the available date and time!")
						return;
					}
					console.log("I am here");
					console.log(marketData);
					console.log(marketData.latitude);
					console.log(marketData.longitude);
					
					var newProduct = {
						seafood : seafoodValue,
						meat : meatValue,
						vegetable : vegetableValue,
						fruit : fruitValue,
						others : othersValue,
						marketId : id,
						orderDate : orderDateValue + " " + orderTime,
						srcLatitude : marketData.latitude, 
						srcLongitude : marketData.longitude
					};
					console.log(newProduct);
					xhrPost(PRODUCT_DATA, newProduct, function(){
						console.log("Done updating product");
						alert("Entry submitted, thank you for your contribution!");
					}, function(err){
						console.error(err);
						alert("Add donation failed...");
					});
				}
				else{
					alert("Market Information not found, please try again!");
					
				}
					
			});
		}*/
    
    	function loadTable(){
    		var table = $('#marketList').DataTable({     
            	columnDefs: [ {
	                orderable: false,
	                className: 'select-checkbox',
	                targets:   0
            	} ],
            	select: {
                	style:    'os',
                	selector: 'td:first-child'
            	},
            	oTableTools: {
            		"sRowSelect": "single"
            	},
            	order: [[ 1, 'asc' ]]
        	});
            
    		$('#marketList tbody').on('click', 'tr', function(e){
            	$(this).toggleClass('selected');
                if($("#donateList:visible").length){
                	$("#donateList").hide();
                    e.preventDefault();
                }
                else{
                	$("#donateList").show();
                    e.preventDefault();
                }
                if(typeof(Storage) !== "undefined")
               		localStorage.setItem("marketInfo", table.row('.selected').data());
               	else
               		alert("storage not available");
            });
        
    	}
    	
        $(document).ready(function () {
        	setTimeout(function(){
        		loadTable();
        	}, 1000);	
        });
        
    </script>
	<script>$( "#orderTime" ).timeDropper();</script>

</body>

</html>
